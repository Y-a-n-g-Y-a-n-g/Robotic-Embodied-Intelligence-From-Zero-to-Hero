<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>模型集成与系统架构 - Robotic Embodied Intelligence - From Zero to Hero</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="src/css/custom-a0f5ac24.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-f5b42ed2.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-a5a73760.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Robotic Embodied Intelligence - From Zero to Hero</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://Yang-Yang.me/" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M272 304h-96C78.8 304 0 382.8 0 480c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32C448 382.8 369.2 304 272 304zM48.99 464C56.89 400.9 110.8 352 176 352h96c65.16 0 119.1 48.95 127 112H48.99zM224 256c70.69 0 128-57.31 128-128c0-70.69-57.31-128-128-128S96 57.31 96 128C96 198.7 153.3 256 224 256zM224 48c44.11 0 80 35.89 80 80c0 44.11-35.89 80-80 80S144 172.1 144 128C144 83.89 179.9 48 224 48z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h3 id="1011-高层策略vla与低层控制器之间的接口"><a class="header" href="#1011-高层策略vla与低层控制器之间的接口">10.1.1 高层策略（VLA）与低层控制器之间的接口</a></h3>
<p>这一小节的核心问题是：<strong>“大脑”（VLA 模型）怎么跟“肌肉”（伺服控制器、电机驱动）说话？</strong>
如果接口设计不好，要么 VLA 决策很聪明但落不了地，要么控制很稳定但能力被严重浪费。</p>
<p>在本书前面，第 6 章已经介绍过机器人运动学和控制基础，这里默认读者已经理解关节空间 / 笛卡尔空间、位置 / 速度 / 力矩控制等概念，本节重点放在<strong>系统层面的“约定与协作”</strong>。</p>
<h4 id="10111-接口定义"><a class="header" href="#10111-接口定义">10.1.1.1 接口定义</a></h4>
<p>从工程角度看，“接口”就是一份<strong>清晰的契约</strong>，约定：</p>
<ul>
<li>VLA 输出什么格式的命令；</li>
<li>低层控制器接受什么、如何解释；</li>
<li>双方在坐标系、单位、频率、约束上的共同假设。</li>
</ul>
<p>可以把接口分成几类维度来理解。</p>
<p><strong>（1）命令空间：控制“什么”</strong></p>
<p>典型选择包括：</p>
<ul>
<li><strong>关节空间命令</strong>
<ul>
<li>目标关节位置：<code>q_target</code>（位置模式）</li>
<li>关节速度：<code>dq_target</code>（速度模式）</li>
<li>关节力矩 / 电流：<code>τ_target</code>（力矩模式）</li>
</ul>
</li>
<li><strong>末端空间命令</strong>
<ul>
<li>绝对位姿：<code>T_target</code>（齐次变换或 position + orientation）</li>
<li>增量位姿：<code>ΔT</code>（Delta Pose）</li>
<li>末端速度 / 扭矩：<code>twist_target</code>（线速度 + 角速度）</li>
</ul>
</li>
</ul>
<p>在 VLA 场景中，<strong>最常见的是“增量式”命令</strong>（Δ pose / Δ joint）和<strong>末端速度命令</strong>：
高层每一帧给出“往桌子中心再移动一点”“手爪再向下 1 cm”，低层控制在高频率下把这些增量平滑跟踪。</p>
<p><strong>（2）坐标系与单位：防止“说的不是一个世界”</strong></p>
<p>接口必须明确：</p>
<ul>
<li>坐标系：
<ul>
<li>世界坐标系（map / world）</li>
<li>机器人基座坐标系（base）</li>
<li>工具坐标系（TCP / end-effector）</li>
</ul>
</li>
<li>单位：
<ul>
<li>位置（m / mm）、角度（rad / degree）、速度（m/s、rad/s）、力矩（N·m）</li>
</ul>
</li>
<li>方向约定：
<ul>
<li>右手坐标系，旋转正方向的定义等</li>
</ul>
</li>
</ul>
<p><strong>实际工程中，许多“莫名其妙”的事故（机械臂猛然乱动）都来自单位或坐标系搞错。</strong>
因此接口规范里通常会明确列出：</p>
<blockquote>
<p>“所有角度使用弧度制；位置在 base 坐标系下，以米为单位；姿态采用四元数 (w, x, y, z) 表示。”</p>
</blockquote>
<p><strong>（3）命令约束与安全边界</strong></p>
<p>接口还要规定 VLA <strong>绝对不能越界的范围</strong>：</p>
<ul>
<li>最大关节速度 / 加速度 / 力矩</li>
<li>允许的工作空间（例如机械臂末端在某个立方体范围内）</li>
<li>力 / 速度安全阈值（用于人机协作）</li>
</ul>
<p>低层控制器通常在 500 Hz–1 kHz 的频率下运行闭环控制，这样可以对约束做非常快的监控与裁剪。(<a href="https://robotics.stackexchange.com/questions/38056/why-control-at-1-khz?utm_source=chatgpt.com">Robotics Stack Exchange</a>)
VLA 在接口层面不必实现全部安全逻辑，但必须<strong>承认</strong>这些约束，接受低层“削减命令”的权利。</p>
<p><strong>（4）接口形式：消息结构与调用方式</strong></p>
<p>在 ROS/ROS2 等系统中，接口往往体现为：</p>
<ul>
<li>一条“动作命令”话题（Topic）或 Action：
<ul>
<li>消息中包含：时间戳、机器人 ID、目标位姿 / 增量、手爪开合状态等；</li>
</ul>
</li>
<li>一条“状态反馈”话题（见 10.1.1.3）；</li>
<li>可选服务 / Action：执行复杂技能（如“抓取”原语）。</li>
</ul>
<p>此处不再重复第 6.4 章中对 ROS 节点 / 话题的概念，而更强调：<strong>VLA 作为一个“高层节点”，只要完全遵守这份契约，就可以在不同机器人上复用。</strong></p>
<p>【图 10-1 占位：
“VLA–控制器接口契约示意图”。
左侧是 VLA 模型（输入视觉与语言），输出一个结构化动作消息；右侧是控制器堆栈（轨迹生成器 + 伺服 + 驱动），中间用一条“动作命令”消息通道连接，并在旁边标注坐标系、单位、约束等。】</p>
<h4 id="10112-时序协调"><a class="header" href="#10112-时序协调">10.1.1.2 时序协调</a></h4>
<p>高层策略与低层控制最大的不一致在于<strong>时间尺度</strong>：</p>
<ul>
<li>低层伺服：
<ul>
<li>控制周期典型为 0.5–1 ms（1–2 kHz），对控制稳定性和安全性负责。(<a href="https://robotics.stackexchange.com/questions/38056/why-control-at-1-khz?utm_source=chatgpt.com">Robotics Stack Exchange</a>)</li>
</ul>
</li>
<li>运动规划 / MPC：
<ul>
<li>运行频率常在 10–100 Hz 之间，受限于规划 / 优化计算开销。(<a href="https://www.tandfonline.com/doi/full/10.1080/01691864.2023.2168134?utm_source=chatgpt.com">Taylor &amp; Francis Online</a>)</li>
</ul>
</li>
<li>VLA 决策：
<ul>
<li>受限于深度模型推理，在边缘 GPU 上通常 5–20 Hz（50–200 ms 一次前向），复杂模型在 CPU 或云端可能更低。</li>
</ul>
</li>
</ul>
<p>因此，接口必须解决两个问题：</p>
<ol>
<li><strong>命令插值与保持（hold）</strong>
<ul>
<li>VLA 每隔 100 ms 输出一条“末端速度 / 增量位姿”；</li>
<li>中间 99 个伺服周期怎么办？</li>
<li>常见做法：
<ul>
<li>低层控制器对高层给出的目标轨迹做<strong>时间插值</strong>，生成更高频率的中间参考点；</li>
<li>如果高层暂时没更新，就保持上一条命令（zero-order hold），但要设定<strong>超时机制</strong>，超时后自动减速或停车。</li>
</ul>
</li>
</ul>
</li>
<li><strong>异步与实时性</strong>
<ul>
<li>VLA 通常运行在非实时操作系统或 GPU 上，推理时间存在抖动；</li>
<li>低层控制必须在硬实时线程中运行，以保证周期固定。(<a href="https://discourse.openrobotics.org/t/question-regarding-ros2-control-design/38751?utm_source=chatgpt.com">Open Robotics Discourse</a>)</li>
<li>典型工程做法：
<ul>
<li>使用<strong>共享内存或无锁环形缓冲区</strong>传递 VLA 输出；</li>
<li>低层在每个伺服周期读取“最新一条合法命令”，避免受上层抖动影响；</li>
<li>VLA 线程则尽可能在软实时约束下完成前向推理。</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>一个简单的<strong>时间线心智模型</strong>：</p>
<ul>
<li>t = 0 ms：相机采集图像，关节状态打上时间戳；</li>
<li>t = 5–10 ms：预处理完成，送入 VLA；</li>
<li>t = 15–80 ms：VLA 推理完成，写入共享缓冲；</li>
<li>t = 80–100+ ms：低层控制周期读取该命令，插值并输出力矩；</li>
<li>下一帧图像再开始新一轮推理。</li>
</ul>
<p>接口定义中往往会明确<strong>两个参数</strong>：</p>
<ul>
<li>高层决策周期 <code>T_policy</code>（如 100 ms）；</li>
<li>低层控制周期 <code>T_control</code>（如 1 ms）；</li>
</ul>
<p><strong>设计目标：在 <strong><code>T_policy</code></strong> 这一时间尺度上，系统仍然“像一个闭环控制系统”那样稳定。</strong></p>
<h4 id="10113-状态反馈"><a class="header" href="#10113-状态反馈">10.1.1.3 状态反馈</a></h4>
<p>高层策略要实现闭环，必须获得足够的<strong>状态反馈</strong>。
但不需要把所有传感器原始数据都推给 VLA，否则带宽和推理负担都无法承受。</p>
<p>可以按“层级”来组织状态反馈：</p>
<p><strong>（1）底层反馈：供控制与安全使用</strong></p>
<ul>
<li>关节级：<code>q, dq, τ</code></li>
<li>末端位姿：<code>T_ee</code></li>
<li>触觉 / 力觉：末端力 / 力矩</li>
<li>安全信号：急停状态、碰撞触发标志</li>
</ul>
<p>这类反馈在 100–1000 Hz 下被低层控制器使用，VLA 一般只看到被<strong>下采样</strong>或<strong>摘要化</strong>后的结果，例如每 100 ms 读取一次当前关节角和末端位姿。</p>
<p><strong>（2）高层反馈：供策略与语义决策使用</strong></p>
<ul>
<li>场景级：当前图像 / 语义分割 / 物体检测结果；</li>
<li>任务级：
<ul>
<li>当前是否已抓住目标物体；</li>
<li>当前子任务完成度（例如“已清理 4/5 个碗”）；</li>
</ul>
</li>
<li>机器人内部状态：
<ul>
<li>当前执行的子技能名称（grasp / move / place）；</li>
<li>VLA 上一次输出动作的执行结果（成功 / 被裁剪 / 因碰撞中止等）。</li>
</ul>
</li>
</ul>
<p>从接口的角度，常见设计是：</p>
<ul>
<li>输出接口：<code>ActionCommand</code>（高层 → 低层）；</li>
<li>输入接口：<code>Observation</code>（低层 + 感知 → 高层）；</li>
<li>二者保持结构上的<strong>对称性</strong>：
<ul>
<li>Observation 中也包含与 VLA 动作空间相同的坐标系与单位。</li>
</ul>
</li>
</ul>
<p>在实现中，Observation 通常会统一打包为 VLA 模型的输入张量（如 stacked images + 状态向量），细节在第 8 章架构部分已经展开；本节更强调一点：<strong>Observation 不是“随便往里堆数据”，而是由接口契约约束的、与动作空间配套的反馈。</strong></p>
<p>【图 10-2 占位：
“闭环接口与状态反馈示意图”。
画出 VLA、低层控制器、机器人本体三个模块，VLA → Controller 为 ActionCommand 箭头，Controller + Robot 回到 VLA 为 Observation 箭头，其中 Observation 分为“高频硬件反馈”与“低频抽象反馈”两层。】</p>
<hr>
<h3 id="1012-在线推理框架从传感器到动作命令的数据流"><a class="header" href="#1012-在线推理框架从传感器到动作命令的数据流">10.1.2 在线推理框架：从传感器到动作命令的数据流</a></h3>
<p>这一节从“流水线”的角度看 VLA 部署：
<strong>一帧图像从相机出来，到机器人真的动起来，中间到底发生了什么？</strong></p>
<p>我们可以把整个在线推理过程拆成三段：</p>
<ol>
<li>感知输入管道；</li>
<li>模型推理；</li>
<li>执行输出与闭环。</li>
</ol>
<h4 id="10121-感知输入管道"><a class="header" href="#10121-感知输入管道">10.1.2.1 感知输入管道</a></h4>
<p>感知输入管道是从<strong>物理世界 → 数字表示</strong>的过程，目标是为 VLA 提供<strong>时间对齐、格式统一、噪声可控</strong>的观测。</p>
<p><strong>（1）数据采集与时间戳</strong></p>
<ul>
<li>摄像头：RGB / RGB-D 图像，分辨率与帧率根据任务选择（如 640×480 @ 30 FPS）；</li>
<li>机器人状态：关节角、末端位姿、手爪状态等；</li>
<li>其他传感器：力矩传感器、激光雷达等（若参与决策）。</li>
</ul>
<p>关键是：<strong>所有数据必须带有时间戳</strong>，以便在后端进行对齐。
在 ROS2 等中间件里，这通常通过统一时钟（/use_sim_time / 系统时钟）实现。(<a href="https://discourse.openrobotics.org/t/question-regarding-ros2-control-design/38751?utm_source=chatgpt.com">Open Robotics Discourse</a>)</p>
<p><strong>（2）预处理与同步</strong></p>
<p>预处理常见步骤：</p>
<ul>
<li>几何校正：去畸变、裁剪无用区域；</li>
<li>尺度调整：缩放到模型接受的分辨率（如 224×224）；</li>
<li>归一化：减均值 / 除方差、通道换序 (HWC → CHW)；</li>
<li>传感器融合：如相机 + 深度图对齐，拼到同一坐标系中。</li>
</ul>
<p>时间同步通常有两种方式：</p>
<ul>
<li><strong>硬同步</strong>：硬件触发多个传感器同时采样；</li>
<li><strong>软同步</strong>：在软件层根据时间戳在附近时间窗口内找“最近帧匹配”。</li>
</ul>
<p>对于 VLA 来说，最关键的不是毫秒级同步，而是<strong>语义上的一致</strong>：
同一 Observation 中的图像与状态，应对应同一物理时刻，这样 VLA 才能把语言目标、视觉场景和机器人的身体状态联系起来。</p>
<p><strong>（3）数据裁剪与带宽控制</strong></p>
<p>在第 7 章我们讨论了数据采集与存储，这里强调在线推理时，还要考虑：</p>
<ul>
<li>不必把<strong>全分辨率图像</strong>送入模型，可以先做 ROI 裁剪（例如只截取桌面区域）；</li>
<li>对于云端推理场景，可以在本地做部分编码（JPEG、H.264）或特征提取，再上传；</li>
<li>通过合理压缩减少网络带宽占用。(<a href="https://rocketmeup.medium.com/edge-computing-reducing-latency-in-future-ai-systems-679ed3b8910a?utm_source=chatgpt.com">Medium</a>)</li>
</ul>
<p>【图 10-3 占位：
“感知输入管道数据流示意图”。
从左到右：Camera / Joint States / Force Sensor → 时间戳标注 → 预处理模块（校正、缩放、裁剪）→ 构造 Observation 张量 → 输入到 VLA。】</p>
<h4 id="10122-模型推理"><a class="header" href="#10122-模型推理">10.1.2.2 模型推理</a></h4>
<p>这一部分是 VLA 的“前向过程”，但在部署场景下，需要额外关注<strong>资源、时间预算和并发</strong>。</p>
<p><strong>（1）推理拓扑</strong></p>
<p>常见设计是：</p>
<ul>
<li>一个<strong>前端进程</strong>负责接收感知数据、构造模型输入；</li>
<li>一个<strong>推理进程 / 线程</strong>负责加载模型权重，在 GPU / NPU 上执行前向；</li>
<li>中间用队列或共享内存传递 batch。</li>
</ul>
<p>为了降低延迟，在线 VLA 推理一般采用：</p>
<ul>
<li>batch size = 1（单样本推理），减少排队等待；</li>
<li>固定图像分辨率与张量尺寸，避免频繁重新分配内存。(<a href="https://arxiv.org/abs/2209.11880?utm_source=chatgpt.com">arXiv</a>)</li>
</ul>
<p><strong>（2）时间预算与监控</strong></p>
<p>在线控制场景中，每一步决策都有严格的<strong>时间上限</strong>，例如：</p>
<ul>
<li>规划 / MPC：50 Hz，即 20 ms 内必须完成一次优化；(<a href="https://www.tandfonline.com/doi/full/10.1080/01691864.2023.2168134?utm_source=chatgpt.com">Taylor &amp; Francis Online</a>)</li>
<li>VLA 决策：假设设定为 10 Hz（100 ms 一次），则必须保证**“图像进来 → 动作输出”**整体在 100 ms 内完成，并留出裕度。</li>
</ul>
<p>工程上通常会：</p>
<ul>
<li>记录每次前向推理耗时，统计平均值、最大值；</li>
<li>设定超时策略：
<ul>
<li>如果单次推理超时，则放弃当前输出，用上一帧动作；</li>
<li>若连续多次超时，系统进入降级模式（减速、停止等），参见 10.3 节安全性讨论。</li>
</ul>
</li>
</ul>
<p><strong>（3）模型版本与热更新</strong></p>
<p>在实际系统中，VLA 模型可能在云端持续改进，需要<strong>热更新</strong>到机器人上：</p>
<ul>
<li>接口约定保持稳定（动作 / 状态格式不变）；</li>
<li>使用版本号标记 VLA 模型（v1, v2…）；</li>
<li>更新流程：先在仿真 / 数字孪生环境验证，再灰度部署到少量机器人，最后全量更新。(<a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC12349443/?utm_source=chatgpt.com">PMC</a>)</li>
</ul>
<p>这里不展开 MLOps 细节，读者可结合第 9.4 节一起理解。</p>
<h4 id="10123-执行输出"><a class="header" href="#10123-执行输出">10.1.2.3 执行输出</a></h4>
<p>VLA 输出的是<strong>抽象动作</strong>（token 序列 / 连续向量），要变成电机电流，至少还要经过三层处理：</p>
<ol>
<li><strong>动作解码与约束裁剪</strong></li>
<li><strong>轨迹生成与平滑</strong></li>
<li><strong>发送命令与结果反馈</strong></li>
</ol>
<p><strong>（1）动作解码与约束裁剪</strong></p>
<p>在第 8.3 节我们讨论了动作 token 的设计，这里从系统角度看：</p>
<ul>
<li>将模型输出的 token 序列还原为：
<ul>
<li>末端位姿增量 ΔT；</li>
<li>或关节增量 Δq / 速度命令；</li>
</ul>
</li>
<li>对结果进行：
<ul>
<li><strong>数值裁剪</strong>（clip 到物理允许范围）；</li>
<li><strong>安全检查</strong>：若某一维度超出设定阈值（例如瞬时速度过大），可直接拒绝并记录日志。</li>
</ul>
</li>
</ul>
<p><strong>（2）轨迹生成与平滑</strong></p>
<p>直接执行“阶跃命令”容易导致机器人动作生硬甚至振荡，需要在接口下游加入<strong>轨迹生成模块</strong>：</p>
<ul>
<li>使用插值（线性、三次样条）在两个高层命令之间生成平滑轨迹；</li>
<li>结合动力学约束（最大速度、加速度、jerk）优化轨迹，例如使用 MPC 或时间缩放方法。(<a href="https://arxiv.org/abs/2209.11880?utm_source=chatgpt.com">arXiv</a>)</li>
</ul>
<p>轨迹生成模块很像一个“传统规划器的缩小版”，主要目标是把 VLA 的高层意图转化为<strong>可执行的、物理可行的微小动作</strong>。</p>
<p><strong>（3）命令发送与执行结果回流</strong></p>
<p>最后一步是：</p>
<ul>
<li>将轨迹（或当前目标点）封装为机器人控制器的原生命令：
<ul>
<li>如 ROS 中的 <code>FollowJointTrajectory</code> / Twist 命令；</li>
</ul>
</li>
<li>底层控制器执行后，每个周期更新当前状态；</li>
<li>VLA 模块在下一次前向时，将“上一条命令的实际执行结果”作为 Observation 的一部分，形成<strong>真正的闭环</strong>（而不是假设输出动作一定被成功执行）。</li>
</ul>
<p>【图 10-4 占位：
“在线推理完整数据流：从传感器到动作命令”。
左侧多源传感器，经预处理后进入 VLA；中间为 VLA 推理模块；右侧是“动作解码 → 轨迹生成 → 控制器 → 机器人”的执行链路，整个流程形成闭环箭头。】</p>
<hr>
<h3 id="1013-本地推理-vs-云端推理延迟与带宽问题"><a class="header" href="#1013-本地推理-vs-云端推理延迟与带宽问题">10.1.3 本地推理 vs 云端推理、延迟与带宽问题</a></h3>
<p>在较大的 VLA 模型出现后，“模型放哪里跑”变成一个系统架构的核心设计问题。</p>
<ul>
<li><strong>本地推理（on-board / edge）</strong>：部署在机器人自身或附近的边缘计算节点；</li>
<li><strong>云端推理（cloud）</strong>：部署在数据中心 GPU 集群；</li>
<li><strong>混合模式（hybrid）</strong>：高频 / 安全关键逻辑本地，低频 / 重计算逻辑云端。</li>
</ul>
<p>边缘计算和云机器人（cloud robotics）的文献已经系统讨论过这一问题：
边缘侧提供低延迟和更好的隐私与带宽利用，而云侧提供大规模算力与集中学习能力。(<a href="https://www.mdpi.com/2224-2708/14/4/65?utm_source=chatgpt.com">MDPI</a>)</p>
<h4 id="10131-本地推理"><a class="header" href="#10131-本地推理">10.1.3.1 本地推理</a></h4>
<p><strong>优势：</strong></p>
<ol>
<li><strong>低延迟、低抖动</strong>
<ul>
<li>数据在本地采集、本地推理，本地执行，链路仅包括设备内部总线和局域通信；</li>
<li>避免公网不稳定带来的长尾延迟，对于抓取、避障等闭环控制至关重要。(<a href="https://www.mdpi.com/2224-2708/14/4/65?utm_source=chatgpt.com">MDPI</a>)</li>
</ul>
</li>
<li><strong>安全性与可用性</strong>
<ul>
<li>即使断网，机器人仍可执行基础功能；</li>
<li>敏感数据（室内环境、人员信息）可以不出本地网络，降低隐私风险。(<a href="https://rocketmeup.medium.com/edge-computing-reducing-latency-in-future-ai-systems-679ed3b8910a?utm_source=chatgpt.com">Medium</a>)</li>
</ul>
</li>
<li><strong>简化带宽需求</strong>
<ul>
<li>不需要持续上传高分辨率视频流，只在必要时上传摘要或统计信息。</li>
</ul>
</li>
</ol>
<p><strong>劣势：</strong></p>
<ul>
<li>算力受限：嵌入式 GPU / NPU 的功耗和算力与数据中心差距较大；</li>
<li>模型大小受约束：需要在第 10.4 节中所说的压缩、量化和蒸馏后才能部署；(<a href="https://promwad.com/news/edge-ai-embedded-devices-2025?utm_source=chatgpt.com">promwad.com</a>)</li>
<li>维护复杂：大量机器人各自部署模型，版本管理、更新和监控的工程成本较高。</li>
</ul>
<p><strong>适用场景：</strong></p>
<ul>
<li>高速移动机器人（无人机、移动底盘）需要 50–100 Hz 以上的决策；(<a href="https://www.sciencedirect.com/science/article/pii/S0743731524000133?utm_source=chatgpt.com">科学直通车</a>)</li>
<li>人机协作、与人近距离接触的机械臂，要求可预测、可控的反应时间；</li>
<li>网络质量不可保证（工厂、家庭 Wi-Fi 环境）的场景。</li>
</ul>
<h4 id="10132-云端推理"><a class="header" href="#10132-云端推理">10.1.3.2 云端推理</a></h4>
<p><strong>优势：</strong></p>
<ol>
<li><strong>强大算力与模型规模</strong>
<ul>
<li>云端可以部署百亿甚至千亿参数的综合 VLA / 多模态模型，提供更强的推理与规划能力；(<a href="https://www.researchgate.net/publication/384083738_Cloud_Robotics_Scalable_AI_And_Robotic_Systems_For_The_Cloud_Age?utm_source=chatgpt.com">ResearchGate</a>)</li>
<li>支持复杂的长时规划、多机器人协同调度等。</li>
</ul>
</li>
<li><strong>集中管理与协同学习</strong>
<ul>
<li>多台机器人共享云端模型与经验，云端可根据海量日志持续训练 / 微调模型，再统一下发更新；(<a href="https://www.researchgate.net/publication/384083738_Cloud_Robotics_Scalable_AI_And_Robotic_Systems_For_The_Cloud_Age?utm_source=chatgpt.com">ResearchGate</a>)</li>
<li>支持跨机器人联合学习、联邦学习等机制。</li>
</ul>
</li>
<li><strong>运维便利</strong>
<ul>
<li>模型部署、版本回滚在云端统一进行，对终端设备影响较小。</li>
</ul>
</li>
</ol>
<p><strong>劣势：</strong></p>
<ol>
<li><strong>延迟与抖动</strong>
<ul>
<li>端到端延迟包括上传数据、队列排队、推理、下行返回；</li>
<li>在复杂网络环境下，延迟和抖动难以控制，很难用在 20 Hz 以上的硬实时控制。(<a href="https://berkeleyautomation.github.io/FogROS2/cloud_robotics?utm_source=chatgpt.com">伯克利自动化</a>)</li>
</ul>
</li>
<li><strong>网络依赖与故障模式</strong>
<ul>
<li>一旦网络中断或拥塞，云端推理不可用，需要本地有应急策略；</li>
<li>安全关键任务不能完全依赖云端决策。</li>
</ul>
</li>
<li><strong>隐私与带宽成本</strong>
<ul>
<li>持续上传高分辨率视频与传感数据消耗大量带宽，并带来隐私与安全风险。(<a href="https://rocketmeup.medium.com/edge-computing-reducing-latency-in-future-ai-systems-679ed3b8910a?utm_source=chatgpt.com">Medium</a>)</li>
</ul>
</li>
</ol>
<p><strong>适用场景：</strong></p>
<ul>
<li>决策频率可较低的任务，如高层任务规划、策略生成、任务解释；</li>
<li>机器人队列规模较大，希望在云端做<strong>全局调度和优化</strong>；</li>
<li>对模型能力要求极高，而本地算力不足以运行完整大模型。</li>
</ul>
<h4 id="10133-混合模式"><a class="header" href="#10133-混合模式">10.1.3.3 混合模式</a></h4>
<p>实际工程中，越来越多系统采用<strong>云–边–端的混合架构</strong>：</p>
<ul>
<li><strong>端（robot）</strong>：机器人本体及其嵌入式控制器；</li>
<li><strong>边（edge）</strong>：靠近机器人部署的边缘服务器 / 网关；</li>
<li><strong>云（cloud）</strong>：远端数据中心。</li>
</ul>
<p>FogROS2、混合机器人平台等系统都强调：让<strong>低延迟、安全关键决策留在边 / 端，高层策略和学习放在云侧</strong>。(<a href="https://berkeleyautomation.github.io/FogROS2/cloud_robotics?utm_source=chatgpt.com">伯克利自动化</a>)</p>
<p>典型分工模式：</p>
<ol>
<li><strong>端：基础控制 + 安全保护</strong>
<ul>
<li>1 kHz 伺服控制、碰撞检测、急停逻辑；</li>
<li>简单的动作原语执行（如固定抓取、固定放置）；</li>
<li>网络断开时的降级策略（缓慢停止、原地等待）。</li>
</ul>
</li>
<li><strong>边：中等规模 VLA 推理 + 局部规划</strong>
<ul>
<li>在边缘 GPU 上运行压缩版 VLA 模型（10–100M 参数级）；</li>
<li>执行视觉感知 + 短期动作决策，如“抓起桌上的杯子”；</li>
<li>与端设备通过有线或局域网通信，延迟可控制在 10–20 ms 级别。</li>
</ul>
</li>
<li><strong>云：大模型推理 + 全局优化 + 持续学习</strong>
<ul>
<li>接收略下采样的感知数据和执行日志；</li>
<li>给出长期任务分解、策略建议或新模型版本；</li>
<li>不直接参与闭环控制，而是作为<strong>策略更新与知识源</strong>。</li>
</ul>
</li>
</ol>
<p>【图 10-5 占位：
“云–边–端混合架构示意图”。
底部是机器人本体（servo + safety），中间是边缘计算节点（运行轻量 VLA、局部规划），顶部是云端（大模型、策略学习）。箭头标注高频低延迟数据流与低频高层策略流。】</p>
<hr>
<h3 id="1014-模块化系统感知规划控制与-vla-的关系"><a class="header" href="#1014-模块化系统感知规划控制与-vla-的关系">10.1.4 模块化系统：感知、规划、控制与 VLA 的关系</a></h3>
<p>在传统机器人软件架构中，已形成比较成熟的模块划分：<strong>感知 → 规划 → 控制</strong>。(<a href="https://www.sciencedirect.com/science/article/am/pii/S0164121221000662?utm_source=chatgpt.com">科学直通车</a>)</p>
<p>VLA 的出现，并不意味着这些模块会被完全替代，而是带来一个新问题：</p>
<blockquote>
<p>“VLA 究竟站在什么位置？怎样与已有模块协同，而不是互相掣肘？”</p>
</blockquote>
<p>可以把系统想象成一个多层结构：</p>
<ul>
<li>底层：控制（Control）——电机级控制、轨迹跟踪；</li>
<li>中层：运动规划（Motion Planning）——生成无碰撞轨迹；</li>
<li>上层：任务 / 策略（Task / Policy）——决定做什么、怎么做；</li>
<li>侧向：感知（Perception）——不断提供对环境的理解。</li>
</ul>
<p>VLA 最自然的位置是**“上层任务 / 策略”的新实现方式**，但它可能渗透到中层与侧向模块。</p>
<h4 id="10141-感知模块"><a class="header" href="#10141-感知模块">10.1.4.1 感知模块</a></h4>
<p>前面第 3 章已经详细介绍过视觉感知，这里从系统架构角度总结一下感知模块的角色：</p>
<ul>
<li><strong>构建环境的多层表示</strong>：
<ul>
<li>几何层：地图、障碍物位置、物体 6D 位姿；</li>
<li>语义层：物体类别、“可放置区域”、“可抓取区域”等语义信息；</li>
</ul>
</li>
<li><strong>提供统一的世界模型接口</strong>：
<ul>
<li>规划器与 VLA 不直接操作原始图像，而是使用“物体列表 + 语义标签 + 几何信息”等结构化表示。</li>
</ul>
</li>
</ul>
<p>在与 VLA 的关系上，有三种典型模式：</p>
<ol>
<li><strong>VLA 直接读取原始感知（端到端）</strong>
<ul>
<li>图像直接送入 VLA 的视觉 backbone；</li>
<li>感知模块仅负责相机标定与基础预处理；</li>
<li>优点：模型可以学到任务相关特征；缺点：可解释性差，难以复用传统感知成果。</li>
</ul>
</li>
<li><strong>VLA 读取感知模块的中间表示</strong>
<ul>
<li>感知模块输出目标检测框、物体位姿等；</li>
<li>VLA 接收这些结构化信息，结合语言和历史，输出动作；</li>
<li>这是经典模块化与 VLA 的折中：部分端到端，部分符号化 / 结构化。</li>
</ul>
</li>
<li><strong>VLA 指导感知模块</strong>
<ul>
<li>VLA 可以输出“关注区域”（attention ROI）、“要识别的物体类别”等，反过来驱动感知模块调整算法重点；</li>
<li>特别是在计算资源有限时，VLA 可以作为“感知调度器”。</li>
</ul>
</li>
</ol>
<p>在系统实现中，感知模块与 VLA 之间同样通过明确的接口契约联系：
例如定义统一的<strong>场景图（scene graph）或物体列表结构</strong>，包含 ID、类别、位姿、尺寸等信息。</p>
<h4 id="10142-规划模块"><a class="header" href="#10142-规划模块">10.1.4.2 规划模块</a></h4>
<p>规划模块是“把目标变成可执行路径”的那一层。
包括：</p>
<ul>
<li>运动规划（如 RRT / PRM / TrajOpt / MPC）；(<a href="https://arxiv.org/abs/2209.11880?utm_source=chatgpt.com">arXiv</a>)</li>
<li>任务规划（如基于 PDDL 的符号规划，或基于图模型的多步任务分解）。</li>
</ul>
<p>VLA 与规划模块的关系大致有三种：</p>
<ol>
<li><strong>VLA 取代任务规划，但保留运动规划</strong>
<ul>
<li>VLA 接受语言指令与场景信息，输出一系列<strong>子目标 / 子任务</strong>：
<ul>
<li>例如：“先移开杯子，再擦桌子”；</li>
</ul>
</li>
<li>运动规划器负责把每个子任务转化为无碰撞轨迹；</li>
<li>优点：兼顾 VLA 的通用性和传统规划的可靠性；</li>
<li>缺点：需要为 VLA 设计清晰的“子任务接口”（类似 skill API）。</li>
</ul>
</li>
<li><strong>VLA 与规划器并联，互为备选</strong>
<ul>
<li>对于简单场景，传统规划器可以独立完成任务；</li>
<li>对于复杂、模糊目标（如“收拾桌面”）由 VLA 产生更鲁棒的动作序列；</li>
<li>系统可以根据环境状态（拥挤、障碍复杂）、性能指标（时间 / 成功率）动态选择调用哪个规划来源。</li>
</ul>
</li>
<li><strong>VLA 内部隐式实现规划能力</strong>
<ul>
<li>对某些简单任务，经过大量示教 + RL，VLA 可以近似实现一个端到端的“学习型规划器”；</li>
<li>例如学会在各种桌面布局下抓取、排序物体，而无需显式调用 RRT；</li>
<li>此时传统规划模块更多作为<strong>安全 fallback</strong> 或<strong>特殊场景的补充</strong>。</li>
</ul>
</li>
</ol>
<p>无论采用哪种模式，工程上一个重要思想是：<strong>不要把传统规划直接废掉，而是让它在系统中保留“安全网”的角色</strong>——在 VLA 输出的动作可能导致碰撞时，规划器可以给出安全替代方案或拒绝执行。(<a href="https://www.sciencedirect.com/science/article/pii/S259012302503717X?utm_source=chatgpt.com">科学直通车</a>)</p>
<h4 id="10143-vla-集成"><a class="header" href="#10143-vla-集成">10.1.4.3 VLA 集成</a></h4>
<p>综合前几小节，可以把 VLA 在整个模块化系统中的位置总结为三种典型集成模式（它们并不互斥，可以在同一系统中共存）：</p>
<p><strong>模式 A：VLA 作为“高层策略模块”</strong></p>
<ul>
<li>输入：
<ul>
<li>语言指令；</li>
<li>感知模块输出的场景表示；</li>
<li>机器人当前任务状态；</li>
</ul>
</li>
<li>输出：
<ul>
<li>子任务序列（调用现有 skill / motion primitive）；</li>
<li>或短期子目标（某个物体的目标位姿）；</li>
</ul>
</li>
<li>运动规划与低层控制保持原样，只是把原来手工编写的规则 / 状态机换成了 VLA 学到的策略。</li>
</ul>
<p>这种模式对已有工业系统最友好：<strong>只替换最上层的大脑，不动底层“肌肉和脊髓”。</strong></p>
<p><strong>模式 B：VLA 作为“端到端控制策略”，传统模块做安全监护</strong></p>
<ul>
<li>VLA 直接从图像和任务语言输出末端速度 / delta pose；</li>
<li>运动规划器主要做“离线验证”和“在线可行性检查”：
<ul>
<li>异步预估 VLA 输出在多少步后是否可能碰撞；</li>
<li>一旦检测到危险，修改或打断 VLA 的动作序列；</li>
</ul>
</li>
<li>感知模块仍可以为 VLA 提供高级语义，例如标签、可抓取区域。</li>
</ul>
<p>很多最近的具身智能系统在实验室阶段采用这种模式：<strong>主角是 VLA，但背后仍有一套“影子规划与监控系统”在兜底。</strong>(<a href="https://arxiv.org/html/2509.06819v1?utm_source=chatgpt.com">arXiv</a>)</p>
<p><strong>模式 C：VLA 与传统模块高度融合的“混合系统”</strong></p>
<ul>
<li>部分子任务完全由 VLA 决策（如整理桌面中的抓取顺序）；</li>
<li>部分子任务仍由传统模块负责（如全局导航、SLAM 建图）；</li>
<li>VLA 与传统模块互相调用：
<ul>
<li>VLA 通过 API 请求“移动到某个导航目标”；</li>
<li>规划模块通过 API 请求 VLA 生成“下一步操作建议”。</li>
</ul>
</li>
</ul>
<p>这种系统往往更复杂，但有更好的可扩展性：
新任务可以通过增加新的技能模块 + 训练 VLA 如何调用这些技能来实现，而不必完全重新训练一个端到端策略。</p>
<p>【图 10-6 占位：
“模块化系统中 VLA 的三种集成模式”。
画出三个小图：</p>
<ul>
<li>左图：VLA 在感知之上、规划之下；</li>
<li>中图：VLA 直接输出控制，规划器作为“安全监护”包裹在旁边；</li>
<li>右图：VLA、感知、规划之间有双向箭头，表示互相调用的混合系统。】</li>
</ul>
<hr>
<p>本节从接口、数据流、部署位置和模块化架构四个角度，讨论了 VLA 如何“落地”到真实机器人系统中。
与前面章节的区别在于：不再只关注模型本身，而是把它视为整个机器人软件栈中的一个**“高层智能组件”**，强调与感知、规划、控制以及边缘 / 云基础设施的协同关系。</p>
<p>理解这一层，对后续在第 10.2 节设计评测协议、在第 10.3 节系统性考虑安全与鲁棒性，都是必要的铺垫。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Ch9.4.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="Ch10.2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Ch9.4.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="Ch10.2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->
        <script src="src/js/custom-links-620ec1bd.js"></script>



    </div>
    </body>
</html>
