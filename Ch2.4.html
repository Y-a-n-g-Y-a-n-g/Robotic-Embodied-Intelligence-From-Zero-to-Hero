<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Transformer 结构 - Robotic Embodied Intelligence - From Zero to Hero</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="src/css/custom-a0f5ac24.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-a289602e.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-a5a73760.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Robotic Embodied Intelligence - From Zero to Hero</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://www.google.com/" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <p>下面是按你给出的提纲，完整展开后的 <strong>2.4.1–2.4.5</strong> 章节正文草稿（书稿风格）。我会适度承接前文 RNN/CNN 内容，并给后续 VLA 章节留呼应点，图片用占位说明。</p>
<hr>
<h3 id="241-self-attention-机制与-querykeyvalue"><a class="header" href="#241-self-attention-机制与-querykeyvalue">2.4.1 Self-Attention 机制与 Query/Key/Value</a></h3>
<p>在前面的序列建模部分已经看到，RNN/LSTM 通过“递归地”一格一格地处理序列，这使得长距离依赖不易捕获，也难以并行训练。Self-Attention（自注意力）则直接在序列中任意两个位置之间建立可学习的“相似度连接”，从而在一次运算中融合全局信息，是 Transformer 的核心思想之一。(<a href="https://arxiv.org/abs/1706.03762?utm_source=chatgpt.com">arXiv</a>)</p>
<h4 id="2411-自注意力机制在序列内部做加权信息汇总"><a class="header" href="#2411-自注意力机制在序列内部做加权信息汇总">2.4.1.1 自注意力机制：在序列内部做“加权信息汇总”</a></h4>
<p>设输入序列长度为 (n)，每个位置的向量维度为 (d_\text{model})，将整个序列写成矩阵形式：<br>[<br>X \in \mathbb{R}^{n \times d_\text{model}}.<br>]</p>
<p>通过三组不同的线性变换，得到 Query（Q）、Key（K）、Value（V）：<br>[<br>Q = X W<sup>Q,\quad K = X W</sup>K,\quad V = X W^V,<br>]<br>其中 (W<sup>Q, W</sup>K, W<sup>V \in \mathbb{R}</sup>{d_\text{model} \times d_k}) 或 (\mathbb{R}^{d_\text{model} \times d_v}) 是可训练的权重矩阵。</p>
<p>标准的 <strong>scaled dot-product attention</strong> 定义为：(<a href="https://en.wikipedia.org/wiki/Attention_%28machine_learning%29?utm_source=chatgpt.com">维基百科</a>)</p>
<p>[<br>\text{Attention}(Q, K, V)<br>= \text{softmax}!\left(\frac{Q K^\top}{\sqrt{d_k}}\right) V.<br>]</p>
<p>其中：</p>
<ul>
<li>(QK<sup>\top \in \mathbb{R}</sup>{n\times n}) 给出序列中任意两个位置之间的“相关性分数”（内积越大，越相似）；</li>
<li>除以 (\sqrt{d_k}) 是为了避免维度过大时内积值过大导致 softmax 饱和；</li>
<li>softmax 在每一行上做归一化，将相关性分数转为“注意力权重”（非负且和为 1）；</li>
<li>将这些权重对 (V) 做加权和，得到每个位置融合了整句信息的新表示。</li>
</ul>
<p>直观地看，每个位置 (i) 的输出向量就是“从全序列所有位置的 Value 中，按相关性做加权平均”的结果，自注意力因此可以在单层中捕获任意距离的依赖关系。</p>
<p>【图 2-4-1 占位：自注意力示意图。上方是一行 token（或 patch）向量，中间通过 Q/K/V 线性变换，下面是一个 (n\times n) 注意力矩阵热力图；矩阵第 i 行突出显示该位置对其它位置的关注程度。】</p>
<h4 id="2412-query--key--value-的含义与类比"><a class="header" href="#2412-query--key--value-的含义与类比">2.4.1.2 Query / Key / Value 的含义与类比</a></h4>
<p>Q/K/V 的命名可以类比为“查字典”的过程：(<a href="https://www.billparker.ai/2024/10/transformer-attention-simple-guide-to-q.html?utm_source=chatgpt.com">billparker.ai</a>)</p>
<ul>
<li><strong>Query（Q，查询）</strong>：当前想要“查”的词条，如一个位置上的 token 表示；</li>
<li><strong>Key（K，键）</strong>：所有候选词条的“索引标签”，用于和 Query 做匹配；</li>
<li><strong>Value（V，值）</strong>：与每个 Key 对应的内容，一旦某个 Key 与 Query 匹配度高，就会更多地读取其对应的 Value 信息。</li>
</ul>
<p>注意力分数由 Query 与各个 Key 的相似度决定（通常就是向量内积），再通过 softmax 归一化后，作为对 Value 的加权系数。因此：</p>
<ul>
<li>若 Query 与某个 Key 成“高相似度”，对应 Value 在输出中权重更大；</li>
<li>若 Query 与某些 Key 几乎无关，则它们对应的 Value 在输出中的权重接近 0。</li>
</ul>
<p>在 <strong>编码器自注意力</strong> 中，Q/K/V 都来自同一个输入序列；在 <strong>解码器的交叉注意力（encoder-decoder attention）</strong> 中，Q 来自解码器当前状态，而 K/V 来自编码器输出，这将在 2.4.4 节进一步展开。(<a href="https://en.wikipedia.org/wiki/Attention_%28machine_learning%29?utm_source=chatgpt.com">维基百科</a>)</p>
<p>从具身智能的角度可以这样理解：机器人在某个时间步要做决策时，它把当前状态向量作为 Query，把过去观测或语言指令编码后的向量作为 Key/Value，通过 attention“查”到与当前状况最相关的信息，再基于这些信息输出动作。</p>
<h4 id="2413-注意力矩阵与掩码机制"><a class="header" href="#2413-注意力矩阵与掩码机制">2.4.1.3 注意力矩阵与掩码机制</a></h4>
<p>把自注意力的权重部分单独记为矩阵：<br>[<br>A = \text{softmax}!\left(\frac{QK<sup>\top}{\sqrt{d_k}}\right) \in \mathbb{R}</sup>{n\times n}.<br>]</p>
<ul>
<li>(A_{ij}) 表示“序列中位置 (i) 对位置 (j) 的注意力权重”；</li>
<li>每一行都是一个概率分布（和为 1），体现了位置 (i) 对各个位置的关注程度。</li>
</ul>
<p>Encoder 层中常用的 <strong>全连接自注意力</strong>，允许每个位置关注序列中任意位置；而在 Decoder 的自回归生成中，为避免“偷看未来”，会对注意力矩阵进行下三角 <strong>因果掩码（causal mask）</strong> 处理：在 softmax 前将所有“未来位置”的相关性分数置为 (-\infty)，softmax 之后它们的权重就变为 0，仅允许当前位置看到自己与其之前的 token。(<a href="https://en.wikipedia.org/wiki/Attention_%28machine_learning%29?utm_source=chatgpt.com">维基百科</a>)</p>
<p>【图 2-4-2 占位：注意力矩阵与掩码示意图。左图为完整的 (n\times n) 注意力矩阵热力图；右图为 Decoder 中的下三角掩码矩阵，上三角区域被灰色遮挡（权重为 0）。】</p>
<p>在机器人动作序列建模中，自回归 Decoder-only 架构同样使用这种因果掩码，以保证每一步动作仅依赖过去的观测和动作历史，符合物理因果顺序。</p>
<hr>
<h3 id="242-多头注意力multi-head-attention"><a class="header" href="#242-多头注意力multi-head-attention">2.4.2 多头注意力（Multi-Head Attention）</a></h3>
<p>单一的自注意力头相当于从一个“投影子空间”里计算相似度和信息汇总。Transformer 引入 <strong>多头注意力（Multi-Head Attention）</strong>，并行地在多个子空间中计算注意力，从而提高表达能力。(<a href="https://papers.neurips.cc/paper/7181-attention-is-all-you-need.pdf?utm_source=chatgpt.com">NeurIPS论文</a>)</p>
<h4 id="2421-多头机制的形式化定义"><a class="header" href="#2421-多头机制的形式化定义">2.4.2.1 多头机制的形式化定义</a></h4>
<p>在多头注意力中，我们为每个头 (i) 单独学习一组线性变换：<br>[<br>W_i<sup>Q, W_i</sup>K, W_i<sup>V \in \mathbb{R}</sup>{d_\text{model} \times d_k},\quad i = 1,\dots,h,<br>]<br>令<br>[<br>\text{head}_i = \text{Attention}(QW_i<sup>Q,\ KW_i</sup>K,\ VW_i^V).<br>]</p>
<p>然后将所有头的输出在特征维上拼接，再通过一个线性层 (W^O) 做整合：<br><a href="[维基百科][2]"><br>\text{MultiHead}(Q,K,V) = \text{Concat}(\text{head}_1, \dots, \text{head}_h), W^O.<br></a></p>
<p>这样，每个头都在各自的投影子空间中学习不同的相似性模式，最终汇聚为一个更丰富的表示。</p>
<p>【图 2-4-3 占位：多头注意力结构图。上方 Q/K/V 通过多组线性变换分别进入多个 attention 单元（Head 1, Head 2, …, Head h），各自输出后在特征维拼接，再经过一个线性层得到最终输出。】</p>
<h4 id="2422-不同注意力头学习不同的关系"><a class="header" href="#2422-不同注意力头学习不同的关系">2.4.2.2 不同注意力头学习不同的关系</a></h4>
<p>大量实证分析表明，不同注意力头往往会“专注”于不同类型的模式：(<a href="https://www.sciencedirect.com/science/article/pii/S2666651022000146?utm_source=chatgpt.com">科学导向</a>)</p>
<ul>
<li>在自然语言任务中，有的头擅长捕获邻近词之间的局部依赖（如短语结构），有的头捕获长距离依赖（如跨句子的共指、主题联系）；</li>
<li>在视觉 Transformer 中，有的头聚焦局部 patch 的几何关系，有的头关注整体场景结构或物体的语义轮廓。</li>
</ul>
<p>对于具身智能任务，可以预期：</p>
<ul>
<li>某些头重点关注与目标物体相关的视觉区域；</li>
<li>某些头偏重障碍物和安全边界；</li>
<li>还有一些头可能更关注时间维度上动作的连续性或物体轨迹。</li>
</ul>
<p>虽然这些“功能分工”不是硬编码的，而是训练过程中自发涌现，但在实践中，可以通过可视化注意力权重来分析模型行为，从而对机器人决策过程获得一定的可解释性（在第 10 章可解释性部分会再回到这一点）。</p>
<p>【图 2-4-4 占位：多头注意力可视化示例。对同一句话（或同一图像 patch 序列），展示多个头的注意力矩阵热力图，每个头关注的模式不同。】</p>
<h4 id="2423-计算开销与并行执行"><a class="header" href="#2423-计算开销与并行执行">2.4.2.3 计算开销与并行执行</a></h4>
<p>从复杂度角度看，多头注意力虽然引入了多个头，但每个头通常使用较小的 (d_k)（例如 (d_k = d_\text{model} / h)），因此总的计算量与单个大头的注意力同阶，只是常数因子有所增加。(<a href="https://papers.neurips.cc/paper/7181-attention-is-all-you-need.pdf?utm_source=chatgpt.com">NeurIPS论文</a>)</p>
<p>更重要的是，各个头之间完全可以在 GPU/TPU 上并行计算，因此在现代硬件上，多头注意力的实际计算效率很高，与标准矩阵乘法的实现高度契合。这也是 Transformer 能够在视觉、语言以及多模态任务上高效扩展到大规模模型的关键工程基础。</p>
<p>在机器人应用中，多头注意力使得单个 VLA 模型可以同时在不同“视角”下理解环境与任务指令，为后续的动作决策提供更丰富的上下文表征。</p>
<hr>
<h3 id="243-位置编码绝对--相对"><a class="header" href="#243-位置编码绝对--相对">2.4.3 位置编码（绝对 / 相对）</a></h3>
<p>自注意力机制本身对输入顺序是“置换不变”的——如果不显式加入位置信息，模型仅将序列视为一个“集合”，无法区分不同排列顺序，从而无法正确建模时间顺序或语序。(<a href="https://aclanthology.org/2021.emnlp-main.828.pdf?utm_source=chatgpt.com">ACL Anthology</a>)</p>
<p>为了解决这一问题，Transformer 在输入层或各层内部引入 <strong>位置编码（Positional Encoding）</strong>，将位置信息注入到每个 token 或 patch 的表示中。</p>
<h4 id="2431-绝对位置编码正弦余弦函数形式"><a class="header" href="#2431-绝对位置编码正弦余弦函数形式">2.4.3.1 绝对位置编码：正弦/余弦函数形式</a></h4>
<p>原始 Transformer 论文提出了一种 <strong>固定的正弦–余弦位置编码</strong>，给每个位置 (pos) 分配一个维度为 (d_\text{model}) 的向量：(<a href="https://arxiv.org/abs/1706.03762?utm_source=chatgpt.com">arXiv</a>)</p>
<p>[<br>\begin{aligned}<br>\text{PE}(pos, 2i)   &amp;= \sin\left(\frac{pos}{10000^{2i/d_\text{model}}}\right),<br>\text{PE}(pos, 2i+1) &amp;= \cos\left(\frac{pos}{10000^{2i/d_\text{model}}}\right),<br>\end{aligned}<br>]<br>其中 (i = 0,1,\dots, d_\text{model}/2-1)。</p>
<p>特点与直觉：</p>
<ul>
<li>不同维度对应不同波长的正弦波，低频维度编码粗粒度的位置信息，高频维度编码细粒度的局部差异；</li>
<li>由于是解析函数定义，不需要训练额外参数，并且可以自然地外推到比训练时更长的序列长度；</li>
<li>通过线性组合不同维度，模型可以在一定程度上推断两个位置之间的相对距离。</li>
</ul>
<p>在实现上，常见做法是在输入 embedding 上“相加”位置编码：<br>[<br>X<sup>\text{input}_i = X</sup>\text{embed}_i + \text{PE}(i).<br>]</p>
<p>【图 2-4-5 占位：若干维度的正弦/余弦位置编码随位置变化的曲线图，展示不同频率、不同波长的波形。】</p>
<p>除正弦编码之外，很多模型也采用 <strong>可学习的绝对位置 embedding</strong>，即像词向量一样为每个位置建立一个可训练表，将其加到输入上。实现更简单，但在泛化到更长序列时往往需要额外技巧。</p>
<h4 id="2432-相对位置编码对相对距离更敏感"><a class="header" href="#2432-相对位置编码对相对距离更敏感">2.4.3.2 相对位置编码：对相对距离更敏感</a></h4>
<p>绝对位置编码强调的是“某个 token 在整个序列中处于第几位”；然而很多任务更关心的是 <strong>token 之间的相对距离</strong>——例如“当前词前面最近的名词在哪里”，“上一时刻与当前时刻的相对差值”等。(<a href="https://arxiv.org/pdf/2310.04418?utm_source=chatgpt.com">arXiv</a>)</p>
<p><strong>相对位置编码（Relative Positional Encoding, RPE）</strong> 的基本思想，是让注意力分数不仅依赖于内容相似度 (q_i^\top k_j)，还依赖于位置差值 ((i-j)) 对应的一个向量或偏置，例如：(<a href="https://lilianweng.github.io/posts/2023-01-27-the-transformer-family-v2/?utm_source=chatgpt.com">Lilian Weng</a>)</p>
<p>[<br>\text{score}<em>{ij}<br>_<em>= \frac{q_i</em><sup></sup></em>\top k_j + q_i_<em>\top r</em>{i-j}}{\sqrt{d_k}},<br>]<br>其中 (r_{i-j}) 是与相对位移 ((i-j)) 相关的参数向量或标量偏置。</p>
<p>代表性工作包括：</p>
<ul>
<li>Shaw 等人在机器翻译中的相对位置编码；</li>
<li>Transformer-XL 使用相对位置编码解决长上下文建模问题；</li>
<li>后续的 T5、RoPE（Rotary Position Embedding）等方法，对相对位置进一步推广，使模型对序列整体平移具有更好的不变性。(<a href="https://lilianweng.github.io/posts/2023-01-27-the-transformer-family-v2/?utm_source=chatgpt.com">Lilian Weng</a>)</li>
</ul>
<p>在机器人与具身智能任务中，时间维度往往很长，而我们关注的是“前后几步”动作与观测之间的因果关系，相对位置编码因此更加契合时序决策的需求。</p>
<p>【图 2-4-6 占位：相对位置编码示意图。以当前时间步为中心，展示不同相对位移（-k…0…+k）的编码向量，或绘制一个相对位置偏置矩阵。】</p>
<h4 id="2433-位置编码的重要性从集合到有序序列"><a class="header" href="#2433-位置编码的重要性从集合到有序序列">2.4.3.3 位置编码的重要性：从“集合”到“有序序列”</a></h4>
<p>如果不给 Transformer 加入任何位置信息，网络对输入的任何排列都将给出相同的输出（只是对应位置发生置换），这会导致：</p>
<ul>
<li>在语言任务中无法区分 “把红色方块放入盒子” 与 “盒子放入红色方块”；</li>
<li>在机器人控制中无法区分“先抓取后放置”与“先放置后抓取”的时序逻辑。</li>
</ul>
<p>位置编码正是将 <strong>“序列顺序”</strong> 显式注入到模型中的关键步骤，使自注意力从“集合运算”转变为真正的“序列建模”。(<a href="https://aclanthology.org/2021.emnlp-main.828.pdf?utm_source=chatgpt.com">ACL Anthology</a>)</p>
<p>在后续构建 VLA 模型时，时间步编号、视频帧序号、甚至任务分段（如“示教阶段/执行阶段”）都会通过某种形式的“位置或阶段编码”进入模型，使机器人能够理解“何时发生了什么”。</p>
<hr>
<h3 id="244-encoderdecoder-架构与纯-decoder-架构"><a class="header" href="#244-encoderdecoder-架构与纯-decoder-架构">2.4.4 Encoder–Decoder 架构与纯 Decoder 架构</a></h3>
<p>Transformer 最初以 <strong>编码器–解码器（Encoder–Decoder）</strong> 形式提出，用于机器翻译等序列到序列任务。随后，纯 <strong>Decoder-only</strong> 架构（如 GPT 系列）成为大语言模型和部分 VLA 模型的主流。理解两者差异，有助于后面选择适合具身智能任务的结构。(<a href="https://arxiv.org/abs/1706.03762?utm_source=chatgpt.com">arXiv</a>)</p>
<h4 id="2441-编码器解码器架构典型-seq2seq-形式"><a class="header" href="#2441-编码器解码器架构典型-seq2seq-形式">2.4.4.1 编码器–解码器架构：典型 Seq2Seq 形式</a></h4>
<p>在 Encoder–Decoder Transformer 中：</p>
<ul>
<li><strong>编码器（Encoder）</strong>：由多层“自注意力 + 前馈网络（FFN）”组成。输入为源序列（例如源语言句子、环境描述、视觉特征序列），经过多层编码后，得到每个位置的上下文表示。</li>
<li><strong>解码器（Decoder）</strong>：同样由多层堆叠组成，但每一层一般包括：
<ol>
<li>带因果掩码的自注意力（masked self-attention），建模目标序列内部已生成部分；</li>
<li>编码器–解码器注意力（encoder-decoder cross-attention），使用解码器当前层隐藏状态作为 Query，编码器输出作为 Key/Value，从源序列里“查找”与当前生成位置相关的信息；</li>
<li>前馈网络。</li>
</ol>
</li>
</ul>
<p>这种结构天然适合“把一段信息转换为另一段信息”的任务，例如机器翻译、摘要生成等。(<a href="https://arxiv.org/abs/1706.03762?utm_source=chatgpt.com">arXiv</a>)</p>
<p>【图 2-4-7 占位：Encoder–Decoder 架构总览图。左侧是若干 Encoder 层叠加，右侧是 Decoder 层，Decoder 每层中有 self-attention、cross-attention 两种注意力模块，中间用箭头表示 cross-attention 连接。】</p>
<p>在具身智能场景中，如果希望“根据视觉感知或状态序列生成一整段动作脚本”，也可以将视觉/状态作为编码器输入，把动作序列作为解码器输出，这与机器翻译非常类似，只是“目标语言”换成了“机器人动作语言”。</p>
<h4 id="2442-纯解码器decoder-only架构统一序列建模"><a class="header" href="#2442-纯解码器decoder-only架构统一序列建模">2.4.4.2 纯解码器（Decoder-only）架构：统一序列建模</a></h4>
<p><strong>Decoder-only</strong> 架构则去掉了单独的编码器，仅保留一堆带因果掩码的自注意力层。训练时将所有内容串成一个长序列，采用自回归语言建模目标：给定前缀 token 预测下一个 token。(<a href="https://huggingface.co/learn/llm-course/en/chapter1/6?utm_source=chatgpt.com">Hugging Face</a>)</p>
<p>其特点是：</p>
<ul>
<li>所有信息（指令、上下文、历史观测、历史动作等）都以统一 token 序列的形式输入；</li>
<li>模型结构更加简洁——本质上就是一个大号自回归 Transformer；</li>
<li>通过合适的分隔符 token 和位置段编码，可以区分“指令区域”“状态区域”“动作区域”等。</li>
</ul>
<p>这正是 GPT 系列等大语言模型采用的结构，也是许多最新 VLM/VLA 模型采用的范式 —— 将视觉特征、语言指令、机器人状态和动作都离散化成 token，统一交给一个 Decoder-only 模型处理。(<a href="https://www.sciencedirect.com/science/article/pii/S2666651022000146?utm_source=chatgpt.com">科学导向</a>)</p>
<h4 id="2443-架构选择任务类型与工程需求"><a class="header" href="#2443-架构选择任务类型与工程需求">2.4.4.3 架构选择：任务类型与工程需求</a></h4>
<p>总结两者的适用场景：</p>
<ul>
<li><strong>Encoder–Decoder 架构</strong>：
<ul>
<li>适合“源序列–目标序列”有明显区分的任务，如机器翻译、长文本摘要、将一段视觉/语言描述转换为完整动作脚本；</li>
<li>在具身智能中，可用于“先感知–后离线规划”的场景，例如根据任务描述和环境扫描生成一条完整的执行计划。</li>
</ul>
</li>
<li><strong>Decoder-only 架构</strong>：
<ul>
<li>适合大规模预训练的通用语言/多模态模型。通过把不同模态与任务都统一到 token 序列上，可以用同一套训练目标和基础设施扩展到非常大的规模；</li>
<li>在具身智能中，可通过“指令 + 多模态观测 + 历史轨迹”的统一序列，让同一个基础模型同时学会多种机器人和多种任务的行为模式。</li>
</ul>
</li>
</ul>
<p>在第 8 章讨论 VLA 架构时，将可以看到两种思路的具体实现：一类是“感知模块 + Decoder 生成动作”的结构（更接近 Encoder–Decoder），另一类则是基于大号 Decoder-only 模型，通过 token 化动作实现统一序列建模的结构。</p>
<p>【图 2-4-8 占位：架构对比图。左侧是 Encoder–Decoder 结构示意，右侧是 Decoder-only 结构示意，下方各自标注典型应用场景（机器翻译 vs GPT 风格生成 vs 多模态 VLA）。】</p>
<hr>
<h3 id="245-参数规模与计算复杂度"><a class="header" href="#245-参数规模与计算复杂度">2.4.5 参数规模与计算复杂度</a></h3>
<p>Transformer 的表达能力很强，但背后对应的是相当可观的参数规模与计算复杂度。本节从参数量和时间/空间复杂度两个角度建立直观认识，这对于后续讨论机器人系统部署、模型压缩与高效注意力尤为重要。(<a href="https://www.sciencedirect.com/science/article/pii/S2666651022000146?utm_source=chatgpt.com">科学导向</a>)</p>
<h4 id="2451-transformer-参数规模估算"><a class="header" href="#2451-transformer-参数规模估算">2.4.5.1 Transformer 参数规模估算</a></h4>
<p>以一个标准 Transformer Block 为例，假设：</p>
<ul>
<li>模型隐藏维度为 (d_\text{model})；</li>
<li>前馈网络内部维度为 (d_\text{ff})（通常取 (4d_\text{model}) 左右）；</li>
<li>注意力头数为 (h)。</li>
</ul>
<p>单层的大致参数量：</p>
<ol>
<li><strong>自注意力部分</strong>
<ul>
<li>Q/K/V 三个线性层：约 (3 d_\text{model}^2) 参数；</li>
<li>输出线性层 (W<sup>O)：约 (d_\text{model}</sup>2) 参数。<br>合计 (\approx 4 d_\text{model}^2)。</li>
</ul>
</li>
<li><strong>前馈网络部分（两层 MLP）</strong>
<ul>
<li>第一层：(d_\text{model} \times d_\text{ff})；</li>
<li>第二层：(d_\text{ff} \times d_\text{model})。<br>合计 (\approx 2 d_\text{model} d_\text{ff})，在 (d_\text{ff} \approx 4d_\text{model}) 时，同样是 (\mathcal{O}(d_\text{model}^2)) 量级。(<a href="https://arxiv.org/abs/1706.03762?utm_source=chatgpt.com">arXiv</a>)</li>
</ul>
</li>
</ol>
<p>因此，单层 Transformer Block 的参数规模近似为：<br>[<br>\mathcal{O}\big(d_\text{model}^2\big),<br>]<br>整个模型若有 (L) 层，则总参数量大致为：<br>[<br>\mathcal{O}\big(L, d_\text{model}^2\big).<br>]</p>
<p>这解释了为何在提升模型能力时，增大 (d_\text{model}) 和层数会带来近似“平方级别”的参数增长。现代大语言模型和多模态模型往往具有数十到数百层、数千到上万的隐藏维度，对应参数规模可以轻松达到百亿甚至万亿级别。(<a href="https://www.sciencedirect.com/science/article/pii/S2666651022000146?utm_source=chatgpt.com">科学导向</a>)</p>
<p>对于具身智能而言，大参数模型意味着更强的跨任务、跨场景泛化能力（“一个模型包办很多机器人和任务”），但也意味着更重的训练和部署成本，这在后续“模型压缩与边缘部署”相关章节中会成为反复讨论的话题。</p>
<h4 id="2452-自注意力的时间与空间复杂度"><a class="header" href="#2452-自注意力的时间与空间复杂度">2.4.5.2 自注意力的时间与空间复杂度</a></h4>
<p>从计算复杂度角度，自注意力的瓶颈在于构造和使用 (n \times n) 的注意力矩阵，其中 (n) 为序列长度。(<a href="https://proceedings.mlr.press/v201/duman-keles23a/duman-keles23a.pdf?utm_source=chatgpt.com">Proceedings of Machine Learning Research</a>)</p>
<p>假设隐藏维度为 (d)：</p>
<ol>
<li>计算 Q/K/V：需要三次矩阵乘法，复杂度约为 (\mathcal{O}(n d^2))；</li>
<li>计算相关性矩阵 (QK<sup>\top)：复杂度约为 (\mathcal{O}(n</sup>2 d))；</li>
<li>计算 softmax 并与 V 相乘：同样约为 (\mathcal{O}(n^2 d))。</li>
</ol>
<p>当 (n) 较大时，(\mathcal{O}(n<sup>2 d)) 项占主导，因此通常说 <strong>自注意力在序列长度上的时间和空间复杂度均为 (\mathcal{O}(n2))</strong>。(<a href="https://aclanthology.org/2023.eacl-main.273.pdf?utm_source=chatgpt.com">ACL Anthology</a>)</sup></p>
<p>这在 NLP 中已经构成长文本建模的瓶颈，而在具身智能中，情况往往更加严峻：</p>
<ul>
<li>机器人控制序列可能包含成千上万步决策；</li>
<li>视觉输入可能是一长段视频（每帧又被切分为多个 patch）；</li>
<li>若将语言、视觉、状态、动作 token 统一串成一个长序列 (n)，则注意力矩阵大小和计算量会极快增长。</li>
</ul>
<p>为此，近几年出现了大量 <strong>高效 Transformer 变体</strong>，如 Linformer、Performer、Longformer 等，通过低秩近似、稀疏注意力、窗口注意力等机制，将复杂度从 (\mathcal{O}(n^2)) 降低到近似线性的 (\mathcal{O}(n)) 或 (\mathcal{O}(n \log n))，使得长序列任务（包括视频、长轨迹建模）变得可行。(<a href="https://arxiv.org/abs/2006.04768?utm_source=chatgpt.com">arXiv</a>)</p>
<p>【图 2-4-9 占位：复杂度对比曲线。横轴为序列长度 (n)（对数尺度），纵轴为计算/显存开销（对数尺度），画出标准自注意力的 (n^2) 曲线与若干近似方法的线性或次线性曲线，标出典型 Transformer 变体名称。】</p>
<p>在本书后面更偏工程实践的章节，将会简要介绍这些高效注意力结构的使用场景，帮助读者在实际机器人项目中根据环境复杂度与硬件条件做出合理选择。</p>
<h4 id="2453-模型规模与性能缩放效应与资源约束"><a class="header" href="#2453-模型规模与性能缩放效应与资源约束">2.4.5.3 模型规模与性能：缩放效应与资源约束</a></h4>
<p>大量工作表明，在足够的数据和计算资源下，Transformer 模型的性能往往随着参数量、训练数据量和训练算力的增加呈现近似幂律关系，即“缩放定律（scaling laws）”：更大模型在语言理解、视觉感知和多模态任务上往往获得更好的泛化能力和少样本学习能力。(<a href="https://www.sciencedirect.com/science/article/pii/S2666651022000146?utm_source=chatgpt.com">科学导向</a>)</p>
<p>然而，在具身智能与机器人领域，还必须严肃考虑以下现实因素：</p>
<ul>
<li><strong>训练数据与成本限制</strong><br>真实机器人互动数据极其昂贵，仿真数据也需要大量算力生成。很难像语言模型那样简单地“堆数据、堆算力”。因此实践中往往采用“互联网多模态预训练 + 少量机器人数据微调”的方式，让大模型在丰富的视觉–语言知识基础上学习具身技能。</li>
<li><strong>推理延迟与实时性要求</strong><br>机器人控制通常需要在几十毫秒级内完成一次决策，超出这个延迟可能会明显影响动作平滑性甚至安全性。过大的模型虽然能力强，但若推理速度不足，就只能用于离线规划或云端辅助，而难以直接用于实时闭环控制。</li>
<li><strong>部署位置与算力约束</strong><br>在云端运行大模型可以使用强大 GPU/TPU，但极度依赖网络连接，且存在安全与隐私问题；在机器人本体或边缘设备上，则必须结合嵌入式 GPU、专用加速芯片等选择合适规模的模型。这些问题将在第 10 章“部署与评测”和第 10.4 节“工程优化与压缩”中进一步展开。</li>
</ul>
<p>因此，在实际的 VLA 系统设计中，<strong>“尽可能大”并不总是最佳答案</strong>。更合理的策略通常是：</p>
<ul>
<li>利用大规模模型作为“通用基础模型”或云端规划者；</li>
<li>同时通过蒸馏、量化和架构简化，在机器人本体上部署较小的实时控制模型；</li>
<li>在任务复杂度、泛化能力、实时控制、安全性和成本之间寻找平衡点。</li>
</ul>
<p>这也是本书从理论到实践不断强调的一条主线：Transformer 和大模型为具身智能提供了前所未有的表达能力，但要真正落地到物理机器人上，必须在 <strong>模型能力与系统工程</strong> 之间进行精心权衡与设计。</p>
<hr>
<p>以上就是 2.4.1–2.4.5 的完整展开稿，后续在第 8 章你就可以直接把这里的 Self-Attention、多头、位置编码、架构差异自然嫁接到具体 VLA 模型的输入输出与训练设计上。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Ch2.3.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="Ch2.5.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Ch2.3.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="Ch2.5.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>


        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->
        <script src="src/js/custom-links-57253681.js"></script>



    </div>
    </body>
</html>
